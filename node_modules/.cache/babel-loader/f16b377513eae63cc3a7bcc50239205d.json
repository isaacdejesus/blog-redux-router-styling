{"ast":null,"code":"var _jsxFileName = \"/home/isaac/git/react_stuff/blog-redux-router-styling/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Blog from './components/Blog';\nimport LoginForm from './components/LoginForm.js';\nimport PostForm from './components/PostForm.js';\nimport Togglable from './components/Togglable.js';\nimport GoodNotif from './components/GoodNotif.js';\nimport blogService from './services/blogs';\nimport loginService from './services/login.js';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setNotif, clearNotif } from './reducers/notifReducer.js';\nimport { initializePosts } from './reducers/postReducer.js';\nimport { setUser, clearUser } from './reducers/userReducer.js';\nimport { addPost, setPosts, addaPost } from './reducers/postReducer.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [vblogs, setBlogs] = useState([]);\n  const [successMsg, setSuccessMsg] = useState(null);\n  const [errMsg, setErrMsg] = useState(null);\n  const dispatch = useDispatch();\n  const notif = useSelector(state => state.notifs);\n  useEffect(() => {\n    dispatch(initializePosts());\n  }, [dispatch]);\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      dispatch(setUser(user));\n      blogService.setToken(user.token);\n    }\n  }, []);\n\n  const addPost = postObject => {\n    dispatch(addaPost(postObject));\n    dispatch(setNotif(\"Successsssss\"));\n    setTimeout(() => {\n      dispatch(clearNotif());\n    }, 3000);\n  };\n\n  const updateLikes = blog => {\n    const updatedBlogId = blog.id;\n    blogService.update(blog.id, updatedBlog).then(returnedPost => {\n      setBlogs(blogs.map(blog => blog.id !== updatedBlogId ? blog : returnedPost));\n    });\n    setBlogs(blogs.sort((a, b) => {\n      return b.likes - a.likes;\n    }));\n  };\n\n  const handleDel = id => {\n    const maybe = window.confirm(\"do you really want to delete?\");\n    if (!maybe) return;\n    const toDel = blogs.find(blog => blog.id === id);\n    blogService.del(id).then(persontoDel => {\n      setBlogs(blogs.filter(blog => blog.id !== toDel.id));\n    });\n    setBlogs(blogs.sort((a, b) => {\n      return b.likes - a.likes;\n    }));\n    console.log(\" I am hereee\");\n    dispatch(setNotif(\"successcully deleted POst\"));\n    setTimeout(() => {\n      dispatch(clearNotif());\n    }, 3000);\n  };\n\n  const user = useSelector(state => state.user);\n  const blogs = useSelector(state => state.posts);\n\n  const handleLogOut = () => {\n    window.localStorage.clear();\n    dispatch(clearUser());\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"blogs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GoodNotif, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), user === null ? /*#__PURE__*/_jsxDEV(Togglable, {\n      buttonLabel: \"login\",\n      children: /*#__PURE__*/_jsxDEV(LoginForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [user.name, \" logged in\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogOut,\n        children: \"logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Togglable, {\n        buttonLabel: \"new post\",\n        children: /*#__PURE__*/_jsxDEV(PostForm, {\n          createPost: addPost\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), blogs.map(blog => /*#__PURE__*/_jsxDEV(Blog, {\n        blog: blog,\n        handleLikes: () => updateLikes(blog),\n        handleDel: () => handleDel(blog.id)\n      }, blog.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"8psb9PFIbfiFSYXosxofL2CUsT0=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/isaac/git/react_stuff/blog-redux-router-styling/src/App.js"],"names":["useState","useEffect","Blog","LoginForm","PostForm","Togglable","GoodNotif","blogService","loginService","useDispatch","useSelector","setNotif","clearNotif","initializePosts","setUser","clearUser","addPost","setPosts","addaPost","App","vblogs","setBlogs","successMsg","setSuccessMsg","errMsg","setErrMsg","dispatch","notif","state","notifs","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","setToken","token","postObject","setTimeout","updateLikes","blog","updatedBlogId","id","update","updatedBlog","then","returnedPost","blogs","map","sort","a","b","likes","handleDel","maybe","confirm","toDel","find","del","persontoDel","filter","console","log","posts","handleLogOut","clear","name"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport LoginForm from './components/LoginForm.js'\nimport PostForm from './components/PostForm.js'\nimport Togglable from './components/Togglable.js'\nimport GoodNotif from './components/GoodNotif.js'\nimport blogService from './services/blogs'\nimport loginService from './services/login.js'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {setNotif, clearNotif} from './reducers/notifReducer.js'\nimport {initializePosts} from './reducers/postReducer.js'\nimport {setUser, clearUser} from './reducers/userReducer.js'\nimport {addPost, setPosts, addaPost} from './reducers/postReducer.js'\n\nconst App = () => {\n    const [vblogs, setBlogs] = useState([])\n    const [successMsg, setSuccessMsg] = useState(null)\n    const [errMsg, setErrMsg] = useState(null)\n    const dispatch = useDispatch()\n    const notif = useSelector(state => state.notifs)\n\n  useEffect(() => {\n      dispatch(initializePosts())\n  }, [dispatch, ])\n    useEffect(() => {\n        const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n        if(loggedUserJSON){\n            const user = JSON.parse(loggedUserJSON)\n            dispatch(setUser(user))\n            blogService.setToken(user.token)\n        }\n    }, [])\n    const addPost = postObject => {\n        dispatch(addaPost(postObject))\n        dispatch(setNotif(\"Successsssss\"))\n        setTimeout(()=> {\n            dispatch(clearNotif())\n        },3000)\n    }\n\n    const updateLikes = (blog) => {\n        const updatedBlogId = blog.id\n        blogService\n            .update(blog.id, updatedBlog)\n            .then(returnedPost => {\n                setBlogs(blogs.map(blog => blog.id !== updatedBlogId ? blog : returnedPost))   \n            })\n        setBlogs(blogs.sort((a,b) => {return b.likes - a.likes}))\n    }\n    const handleDel = id => {\n        const maybe = window.confirm(\"do you really want to delete?\")\n        if(!maybe)\n            return\n        const toDel = blogs.find(blog => blog.id === id)\n        blogService\n            .del(id)\n            .then(persontoDel => {\n                setBlogs(blogs.filter(blog => blog.id !== toDel.id))\n            }) \n        \n        setBlogs(blogs.sort((a,b) => {return b.likes - a.likes}))\n        console.log(\" I am hereee\")\n        dispatch(setNotif(\"successcully deleted POst\"))\n        setTimeout(()=> {\n            dispatch(clearNotif())\n        },3000)\n    }\n    const user = useSelector(state => state.user)\n    const blogs = useSelector(state => state.posts)\n    const handleLogOut = () => {\n        window.localStorage.clear();\n        dispatch(clearUser());\n    }\n  return (\n    <div>\n      <h2>blogs</h2>\n      <GoodNotif />\n      {user === null ?\n        <Togglable buttonLabel='login'>\n          <LoginForm/>\n        </Togglable> :\n       <div>\n            <p>{user.name} logged in</p>\n            <button onClick={handleLogOut } >logout</button>\n            <Togglable buttonLabel=\"new post\">\n                <PostForm createPost={addPost}/>\n            </Togglable>\n            {blogs.map(blog =>\n            <Blog key={blog.id} blog={blog} handleLikes={()=> updateLikes(blog)} handleDel={()=> handleDel(blog.id)} />)}\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}