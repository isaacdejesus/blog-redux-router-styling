{"ast":null,"code":"var _jsxFileName = \"/home/isaac/git/react_stuff/blog-redux-router-styling/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Blog from './components/Blog';\nimport LoginForm from './components/LoginForm.js';\nimport PostForm from './components/PostForm.js';\nimport Togglable from './components/Togglable.js';\nimport GoodNotif from './components/GoodNotif.js';\nimport blogService from './services/blogs';\nimport loginService from './services/login.js';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setNotif, clearNotif } from './reducers/notifReducer.js';\nimport { initializePosts } from './reducers/postReducer.js';\nimport { setUser, clearUser } from './reducers/userReducer.js';\nimport { setPost } from './reducers/postReducer.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [vblogs, setBlogs] = useState([]);\n  const [successMsg, setSuccessMsg] = useState(null);\n  const [errMsg, setErrMsg] = useState(null);\n  const dispatch = useDispatch();\n  const notif = useSelector(state => state.notifs);\n  useEffect(() => {\n    dispatch(initializePosts());\n  }, [dispatch, notif]);\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      dispatch(setUser(user));\n      blogService.setToken(user.token);\n    }\n  }, []);\n\n  const addPost = postObject => {\n    blogService.create(postObject).then(returnedPost => {\n      setBlogs(blogs.concat(returnedPost));\n    });\n    dispatch(setNotif(\"Successsssss\"));\n    setTimeout(() => {\n      dispatch(clearNotif());\n    }, 3000);\n  };\n\n  const updateLikes = blog => {\n    const updatedBlog = {\n      user: blog.user.id,\n      author: blog.author,\n      title: blog.title,\n      url: blog.url,\n      likes: blog.likes\n    };\n    const updatedBlogId = blog.id;\n    blogService.update(blog.id, updatedBlog).then(returnedPost => {\n      setBlogs(blogs.map(blog => blog.id !== updatedBlogId ? blog : returnedPost));\n    });\n    setBlogs(blogs.sort((a, b) => {\n      return b.likes - a.likes;\n    }));\n  };\n\n  const handleDel = id => {\n    const maybe = window.confirm(\"do you really want to delete?\");\n    if (!maybe) return;\n    const toDel = blogs.find(blog => blog.id === id);\n    blogService.del(id).then(persontoDel => {\n      setBlogs(blogs.filter(blog => blog.id !== toDel.id));\n    });\n    setBlogs(blogs.sort((a, b) => {\n      return b.likes - a.likes;\n    }));\n    console.log(\" I am hereee\");\n    dispatch(setNotif(\"successcully deleted POst\"));\n    setTimeout(() => {\n      dispatch(clearNotif());\n    }, 3000);\n  };\n\n  const user = useSelector(state => state.user);\n  const blogs = useSelector(state => state.posts);\n\n  const handleLogOut = () => {\n    window.localStorage.clear();\n    dispatch(clearUser());\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"blogs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GoodNotif, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), user === null ? /*#__PURE__*/_jsxDEV(Togglable, {\n      buttonLabel: \"login\",\n      children: /*#__PURE__*/_jsxDEV(LoginForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [user.name, \" logged in\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogOut,\n        children: \"logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Togglable, {\n        buttonLabel: \"new post\",\n        children: /*#__PURE__*/_jsxDEV(PostForm, {\n          createPost: addPost\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this), blogs.map(blog => /*#__PURE__*/_jsxDEV(Blog, {\n        blog: blog,\n        handleLikes: () => updateLikes(blog),\n        handleDel: () => handleDel(blog.id)\n      }, blog.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"8psb9PFIbfiFSYXosxofL2CUsT0=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/isaac/git/react_stuff/blog-redux-router-styling/src/App.js"],"names":["useState","useEffect","Blog","LoginForm","PostForm","Togglable","GoodNotif","blogService","loginService","useDispatch","useSelector","setNotif","clearNotif","initializePosts","setUser","clearUser","setPost","App","vblogs","setBlogs","successMsg","setSuccessMsg","errMsg","setErrMsg","dispatch","notif","state","notifs","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","setToken","token","addPost","postObject","create","then","returnedPost","blogs","concat","setTimeout","updateLikes","blog","updatedBlog","id","author","title","url","likes","updatedBlogId","update","map","sort","a","b","handleDel","maybe","confirm","toDel","find","del","persontoDel","filter","console","log","posts","handleLogOut","clear","name"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport LoginForm from './components/LoginForm.js'\nimport PostForm from './components/PostForm.js'\nimport Togglable from './components/Togglable.js'\nimport GoodNotif from './components/GoodNotif.js'\nimport blogService from './services/blogs'\nimport loginService from './services/login.js'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {setNotif, clearNotif} from './reducers/notifReducer.js'\nimport {initializePosts} from './reducers/postReducer.js'\nimport {setUser, clearUser} from './reducers/userReducer.js'\nimport {setPost} from './reducers/postReducer.js'\n\nconst App = () => {\n    const [vblogs, setBlogs] = useState([])\n    const [successMsg, setSuccessMsg] = useState(null)\n    const [errMsg, setErrMsg] = useState(null)\n    const dispatch = useDispatch()\n    const notif = useSelector(state => state.notifs)\n\n  useEffect(() => {\n      dispatch(initializePosts())\n  }, [dispatch, notif])\n    useEffect(() => {\n        const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n        if(loggedUserJSON){\n            const user = JSON.parse(loggedUserJSON)\n            dispatch(setUser(user))\n            blogService.setToken(user.token)\n        }\n    }, [])\n    const addPost = postObject => {\n        blogService\n            .create(postObject)\n            .then(returnedPost => {\n                setBlogs(blogs.concat(returnedPost))\n            })\n        dispatch(setNotif(\"Successsssss\"))\n        setTimeout(()=> {\n            dispatch(clearNotif())\n        },3000)\n    }\n\n    const updateLikes = (blog) => {\n        const updatedBlog = {\n            user: blog.user.id,\n            author: blog.author,\n            title: blog.title,\n            url: blog.url,\n            likes: blog.likes\n        }\n        const updatedBlogId = blog.id\n        blogService\n            .update(blog.id, updatedBlog)\n            .then(returnedPost => {\n                setBlogs(blogs.map(blog => blog.id !== updatedBlogId ? blog : returnedPost))   \n            })\n        setBlogs(blogs.sort((a,b) => {return b.likes - a.likes}))\n    }\n    const handleDel = id => {\n        const maybe = window.confirm(\"do you really want to delete?\")\n        if(!maybe)\n            return\n        const toDel = blogs.find(blog => blog.id === id)\n        blogService\n            .del(id)\n            .then(persontoDel => {\n                setBlogs(blogs.filter(blog => blog.id !== toDel.id))\n            }) \n        \n        setBlogs(blogs.sort((a,b) => {return b.likes - a.likes}))\n        console.log(\" I am hereee\")\n        dispatch(setNotif(\"successcully deleted POst\"))\n        setTimeout(()=> {\n            dispatch(clearNotif())\n        },3000)\n    }\n    const user = useSelector(state => state.user)\n    const blogs = useSelector(state => state.posts)\n    const handleLogOut = () => {\n        window.localStorage.clear();\n        dispatch(clearUser());\n    }\n  return (\n    <div>\n      <h2>blogs</h2>\n      <GoodNotif />\n      {user === null ?\n        <Togglable buttonLabel='login'>\n          <LoginForm/>\n        </Togglable> :\n       <div>\n            <p>{user.name} logged in</p>\n            <button onClick={handleLogOut } >logout</button>\n            <Togglable buttonLabel=\"new post\">\n                <PostForm createPost={addPost}/>\n            </Togglable>\n            {blogs.map(blog =>\n            <Blog key={blog.id} blog={blog} handleLikes={()=> updateLikes(blog)} handleDel={()=> handleDel(blog.id)} />)}\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}